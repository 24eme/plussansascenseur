{% extends 'base.html.twig' %}

{% block body %}
<h2>Mon ascenseur</h2>

<div class="row my-3">
    <div class="col-sm-12" id="addrSearch" data-target="{{ path('nearby', {coordinates: '_coordinates_', photo: photoid}) }}">
        <p>Veuillez indiquer l'adresse de l'ascenseur :</p>
		<input {% if(not coordinates) %}autofocus="autofocus"{% endif %} class="typeahead form-control" type="text" placeholder="{% if address %}{{ address }}{% else %}Saisissez l'adresse de votre ascenseur{% endif %}">
    </div>
</div>

{% if coordinates %}

<h3>Résultats</h3>

<table class="table table-striped table-hover">
	<tbody>
		{% for elevator in elevators %}
		{% set photo = elevator.photos.first() %}
        <tr class="clickable-row" data-href="{{ path('signalement', {ascenseur: elevator.id, photo: photoid}) }}">
			<td class="col-sm-2 text-right">
				{% if photo %}
            	<img src="{{ photo.getBase64Src() }}" alt="{{ photo.updatedAt |date("m/d/Y") }}" class="img-fluid" style="margin-bottom:0; max-height : 100px;"/>
            	{% endif %}
			</td>
			<td>
				{% if elevator.constructeurNom %}Ascenseur <strong>{{ elevator.constructeurNom }}</strong> {% endif %}{% if elevator.reference %}Ref. <strong>{{ elevator.reference }}</strong>{% endif %}
				{% if elevator.constructeurNom and elevator.reference %}<br />{% endif %}
				{{ elevator.getAdresseLibelle() }}
			</td>
		</tr>
		{% endfor %}
		<tr class="clickable-row" data-href="{{ path('signalement', {coordinates: coordinates, photo: photoid}) }}" style="border: 1px solid #dee2e6;">
			<td class="col-sm-2 text-right"><img src="{{ asset('img/no-elevator.svg') }}" alt="Inspired by Adnen Kadri and Ali Riza Saçan from Noun Project" class="img-fluid" style="margin-bottom:0; max-height : 100px;"/></td>
			<td valign="middle">Mon ascenseur n'est pas listé ici. <a href="javascript:void(0)">Cliquez pour le créer</a></td>
		</tr>
	</tbody>
</table>

{% endif %}

{% endblock %}
